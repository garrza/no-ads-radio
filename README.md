# Radio Station Song Fetcher Bot

This project is an automated bot built using Python, the Spotify API, and web scraping. The bot fetches songs from a local radio station (Classic FM Mexico) and adds them to a Spotify playlist, providing a seamless and ad-free listening experience.

## Features

- Automatically fetches songs from Classic FM Mexico radio station
- Adds fetched songs to a Spotify playlist
- Runs on GitHub Actions (scheduled hourly)
- Prevents duplicate songs from being added

## Setup Instructions

### 1. Fork/Clone this Repository

```bash
git clone https://github.com/your_username/no-ads-radio.git
cd no-ads-radio
```

### 2. Set Up Spotify API Credentials

1. Go to [Spotify Developer Dashboard](https://developer.spotify.com/dashboard)
2. Create a new app
3. Note your **Client ID** and **Client Secret**
4. Add `http://localhost:8888/callback` as a Redirect URI in your app settings

### 3. Get Your Spotify Refresh Token

Run this locally to get your refresh token:

```bash
pip install -r requirements.txt
python -c "
import spotipy
from spotipy.oauth2 import SpotifyOAuth

sp = SpotifyOAuth(
    client_id='YOUR_CLIENT_ID',
    client_secret='YOUR_CLIENT_SECRET',
    redirect_uri='http://localhost:8888/callback',
    scope='playlist-modify-public',
    open_browser=True
)

token_info = sp.get_access_token(as_dict=True)
print('Refresh Token:', token_info['refresh_token'])
"
```

Replace `YOUR_CLIENT_ID` and `YOUR_CLIENT_SECRET` with your credentials. This will open a browser for authorization and print your refresh token.

### 4. Configure GitHub Secrets

Go to your GitHub repository → Settings → Secrets and variables → Actions → New repository secret

Add the following secrets:

- `SPOTIFY_CLIENT_ID`: Your Spotify Client ID
- `SPOTIFY_CLIENT_SECRET`: Your Spotify Client Secret
- `SPOTIFY_REDIRECT_URI`: `http://localhost:8888/callback`
- `SPOTIFY_USERNAME`: Your Spotify username
- `SPOTIFY_PLAYLIST_ID`: Your playlist ID (from the playlist URL)
- `SPOTIFY_REFRESH_TOKEN`: The refresh token from step 3

### 5. Enable GitHub Actions

1. Go to the **Actions** tab in your repository
2. Enable workflows if prompted
3. The workflow will run automatically every hour
4. You can also trigger it manually using "Run workflow"

## Local Development

For local testing:

1. Create a `.env` file:

```bash
SPOTIFY_CLIENT_ID=your_client_id
SPOTIFY_CLIENT_SECRET=your_client_secret
SPOTIFY_REDIRECT_URI=http://localhost:8888/callback
SPOTIFY_USERNAME=your_username
SPOTIFY_PLAYLIST_ID=your_playlist_id
SPOTIFY_REFRESH_TOKEN=your_refresh_token
```

2. Install dependencies:

```bash
pip install -r requirements.txt
```

3. Run the script:

```bash
python main.py
```

## How It Works

1. **Scraper** (`modules/scraper.py`): Fetches currently playing songs from Classic FM Mexico
2. **Spotify Integration** (`modules/spotify.py`): Searches for songs on Spotify and adds them to your playlist
3. **Main Script** (`main.py`): Orchestrates the process
4. **GitHub Actions** (`.github/workflows/update-playlist.yml`): Runs the script hourly

## Link to Playlist

You can access the playlist generated by the bot [here](https://open.spotify.com/playlist/2nGXIsEZ0ggH2M2shAsCmg?si=5fe3038a63b2471b).

## Customization

To use a different radio station:

- Edit `modules/scraper.py` and change the `url` variable
- Adjust the scraping logic based on the station's website structure

## Troubleshooting

- **Authentication errors**: Make sure your refresh token is valid and all secrets are correctly set
- **No songs found**: The radio station website structure may have changed
- **GitHub Actions not running**: Check that Actions are enabled in your repository settings

## Contributing

Contributions are welcome! Feel free to open issues or submit pull requests to improve the project.

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.
